<app-title
    *ngIf="action === 'duplicate'"
    [context]="'Definition'"
    [title]="'Duplicate ' + sourceDefinition?.name"
></app-title>

<div class="content-body">
    <div class="container-fluid">
        <div class="form build-defintion-add-form">
            <div class="row form-section">
                <div class="col-md-12">
                    <h3>Basic information</h3>
                </div>
                <div class="form-group col-md-12">
                    <label for="addDefinition_name" class="control-label"
                        >Name</label
                    >
                    <input
                        type="text"
                        class="form-control"
                        id="addDefinition_name"
                        name="addDefinition_name"
                        [(ngModel)]="definition.name"
                    />
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="btn-block">
                        <a
                            *ngIf="!isRecipeInputModeFullForm()"
                            (click)="
                                switchMode(definitionRecipeInputModes.fullForm)
                            "
                            class="btn btn-primary btn-sm"
                        >
                            Full recipe form
                        </a>
                        <a
                            *ngIf="!isRecipeInputModeSimplifiedForm()"
                            (click)="
                                switchMode(
                                    definitionRecipeInputModes.simplifiedForm
                                )
                            "
                            class="btn btn-primary btn-sm"
                        >
                            Simplified recipe form
                        </a>
                        <a
                            *ngIf="!isRecipeInputModeRawYaml()"
                            (click)="
                                switchMode(definitionRecipeInputModes.rawYaml)
                            "
                            class="btn btn-primary btn-sm"
                        >
                            Recipe in YAML format
                        </a>
                    </div>
                </div>
            </div>

            <!-- Recipe form -->
            <div *ngIf="isRecipeInputModeFullForm()">
                <app-recipe-form [recipe]="definition.recipe"></app-recipe-form>
            </div>

            <!-- Recipe form -->
            <div *ngIf="isRecipeInputModeSimplifiedForm()">
                <app-definition-recipe-simplified-form
                    [recipe]="definition.recipe"
                ></app-definition-recipe-simplified-form>
            </div>

            <!-- Import recipe from Yaml -->
            <div *ngIf="isRecipeInputModeRawYaml()">
                <app-import-definition-recipe-yaml
                    (importRecipeYaml)="importRecipeYaml($event)"
                ></app-import-definition-recipe-yaml>
            </div>

            <!-- Buttons -->
            <div class="form-section">
                <div class="row">
                    <div class="col-md-12">
                        <button
                            type="submit"
                            class="btn btn-success"
                            (click)="createDefinition()"
                        >
                            Submit
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
